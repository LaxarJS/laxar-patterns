# LaxarJS Patterns

To allow for widgets to cooperate without tight coupling, it is very useful to share a basic event vocabulary.
The LaxarJS Runtime already defines the semantics of [core event patterns](https://laxarjs.org/docs/laxar-v2-latest/manuals/events/#core-patterns).
For application-level events, _LaxarJS Patterns_ provides an additional vocabulary, which may be grouped into a handful of _pattern families_.
Before starting with the patterns, make sure that you are familiar with the [LaxarJS Core Concepts](https://laxarjs.org/docs/laxar-v2-latest/concepts/) and the [LaxarJS events manual](https://laxarjs.org/docs/laxar-v2-latest/manuals/events/).

For efficient usage of the available pattern libraries in your widgets, you should consult the [API docs](api/laxar-patterns) as well.


## Families of LaxarJS Patterns

Most application-level events have to do with _resources_, _actions_ and _flags_.
There is a common theme to how these patterns are used:
Widgets define _what events_ generally concern them, but the page configuration is used to constrain _where_ or _when_ they are interested in these events:

- an email viewer is interested in _resource-events_, but only for the _currently selected email_ resource, not for the _mailbox_ resource
- a navigation activity may be interested in _action-events_, but only in those generated by the _next_ and _previous_ buttons, not in those generated by the _save_ button
- a widget presenting real-time stock market information is interested in _flag-events_, but only those that tell wether its container popover widget is currently open, so that it may pause updates otherwise


### Resources

Possibly the most important family of patterns, _resource events_ deals with sharing, validating and persisting application _resources_.
Here, _resource_ usually refers to a [JSON](http://json.org) representation of a [REST](http://en.wikipedia.org/wiki/Representational_state_transfer) resource, for example in [HAL](http://tools.ietf.org/html/draft-kelly-json-hal-06) format.
However, LaxarJS and the patterns described here do not actually make assumptions about the origin or the internal structure of resources, except that they are directly representable as JSON objects.
This means that it is perfectly acceptable to obtain resources through a different mechanism than HTTP (such as _WebSockets_ or _localStorage_).

The resource patterns cover events starting with the following topics:

- `didReplace` and `didUpdate`
- `validateRequest`, `willValidate` and `didValidate`
- `saveRequest`, `willSave` and `didSave`

[more on resources »](./patterns/resources.md)


### Actions

Widgets may publish _requests for action_ to indicate that the user has triggered some functionality outside of their own scope.
Depending on the page configuration, other widgets will respond to these actions in whatever way is appropriate or configured for them.
Widgets may respond using the [_will/did_-mechanism](https://laxarjs.org/docs/laxar-v2-latest/manuals/events/#request-events), for long running actions.

The actions pattern covers events starting with the following topics:

- `takeActionRequest`, `willTakeAction` and `didTakeAction`

[more on actions »](./patterns/actions.md)


### Flags

_Flags_ allow widgets to communicate boolean state.
For example, one activity could track validation events from all widgets on a page and publish a flag describing the overall validation state.
A navigation widget could then enable or disable its "save" button according to that state.

The flag pattern covers events starting with the following topics:

- `didChangeFlag`

[more on flags »](./patterns/flags.md)


### Errors

Sometimes widgets and especially activities have to indicate an error situation that is not recoverable (such as a network problem).
The _error events_ can be used to broadcast these problems, and have another component handle them, through means such as logging, displaying a problem message to the user or navigating to an error page.

The error pattern covers events starting with the following topics:

- `didEncounterError`

[more on errors »](./patterns/errors.md)
